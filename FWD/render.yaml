services:
  - type: web
    name: railway-migrated-backend
    env: node
    plan: free # Change to 'starter' for production apps to avoid cold starts
    
    # CRITICAL: This replaces "cd backend" in your commands
    # Render will execute all commands inside this directory
    rootDir: backend

    # Build Command
    # Nixpacks (Railway) did this automatically. On Render, we must be explicit.
    # If you have a build script (e.g., TypeScript), use: "npm install && npm run build"
    buildCommand: npm install

    # Start Command
    # Note: No "cd backend" needed here because of rootDir above
    startCommand: npm start

    # Environment Variables
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 5000
      - key: MONGODB_URI
        sync: false # You will be prompted to enter this value in Render Dashboard
      - key: JWT_SECRET
        sync: false # You will be prompted to enter this value in Render Dashboard
      - key: FRONTEND_URL
        sync: false # You will be prompted to enter this value in Render Dashboard

    # Deployment Settings
    autoDeploy: true
